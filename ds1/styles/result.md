---
title: Use Azure Front Door to provide geo-acceleration in Microsoft Entra application proxy.
description: Optimize performance for global connectivity scenarios using Azure Front Door for geo-acceleration with Microsoft Entra application proxy.
author: kenwith
ms.service: entra-id
ms.subservice: app-proxy
ms.topic: how-to
ms.date: 02/26/2024
ms.author: kenwith
ms.reviewer: ashishj
---

# Using Azure Front Door for geo-acceleration in Microsoft Entra application proxy

This article explains how to configure Microsoft Entra application proxy with Azure Front Door to reduce latency and improve efficiency.

## What is Azure Front Door?

Azure Front Door delivers low-latency, high-throughput content at scale from the cloud or on-premises infrastructure to users anywhere. It accelerates static and dynamic content delivery with a unified platform built on the massively scalable Microsoft private global network. For more details about Azure Front Door, see [What is Azure Front Door?][front-door-overview].

## Deployment steps

Securely expose a web application on the internet using Microsoft Entra application proxy with Azure Front Door. The reference architecture for the deployment is shown in the diagram.

:::image type="content" source="./media/application-proxy-azure-front-door/azure-front-door.png" alt-text="Diagram of deployment architecture." lightbox="./media/application-proxy-azure-front-door/azure-front-door.png":::

## Prerequisites

- A Front Door Service – Standard or Classic tier.
- Applications located in a single region.
- A custom domain for the application.
- Application proxy subscription licenses available in Microsoft Entra ID P1 or P2. For more details about licensing options and features, see [Microsoft Entra pricing](https://www.microsoft.com/security/business/identity-access-management/azure-ad-pricing).

## Application proxy configuration

Configure the application proxy for Front Door.

1. Install the connector at the location of your application instances. For example, **US West**. Assign the connector group to the correct region for the connector. For example, **North America**.
2. Set up your application instance with the application proxy.
    - Set the Internal URL to the address on the internal network, for example, `contoso.org`.
    - Set the External URL to the domain address users access from the internet. You must configure a custom domain. For example, `contoso.org`. For more details on configuring a custom domain, see [Custom domains in Microsoft Entra application proxy][appproxy-custom-domain].
    - Assign the application to the appropriate connector group. For example, **North America**.
    - Record the URL generated by the application proxy. For example, `contoso.msappproxy.net`.
    - Configure a CNAME entry in the Domain Name System (DNS). Point the external URL to the Azure Front Door endpoint. For example, `contoso.org` to `contoso.msappproxy.net`.
3. In the Azure Front Door service, use the URL generated for the application by the application proxy as a backend for the backend pool. For example, `contoso.msappproxy.net`.

The table shows a sample application proxy configuration. The sample scenario uses the sample application domain `www.contoso.org` as the external URL.

|     | Configuration | Additional Information |
|---- | ----------------------- | ---------------------- |
| **Internal URL** | `nam.contoso.com` |  |
| **External URL** | `contoso.org` | Configure a custom domain for access from the internet. |
| **Connector group** | `North America` | To optimize performance, select the connector group in the geo location closest to the application instance. |

## Azure Front Door configuration

Azure Front Door is available in different tiers, including Standard, public preview, Premium, and Classic. Select a tier based on your preference. For more details on tier comparison, see [Azure Front Door tier comparison][front-door-tier].

The configuration steps refer to these key definitions:
- **Endpoint name** - A globally unique name for the endpoint. You use this setting to onboard custom domains as well. For example, the front door endpoint name `contoso-nam` generates the endpoint hostname `contoso-nam.azurefd.net` and uses the custom domain hostname `contoso.org`.
- **Origin** - This setting refers to your application servers. Azure Front Door routes client requests to origins based on the type, port, priority, and weight you specify.
- **Origin type** - The type of resource you want to add. Front Door supports autodiscovery of your application backends from *App Service*, *Cloud Service*, or *Storage*. For a different resource in Azure or even a non-Azure backend, select *Custom* host. For example, select *Custom* host for a backend on the application proxy service.
- **Origin host name** - This setting represents the backend origin hostname. For example, `contoso.msappproxy.net`.
- **Origin host header** - This setting represents the host header value sent to the backend for each request. For example, `contoso.org`. For more details about origin and origin groups, see [Origins and origin groups – Azure Front Door][front-door-origin].

1. Create a Front Door (Standard) configuration.
    - Add an *Endpoint name* to generate the Front Door’s default domain on `azurefd.net`. For example, `contoso-nam` generates the endpoint hostname `contoso-nam.azurefd.net`.
    - Add an *Origin Type* for the type of backend resource. Use **Custom** for the application proxy resource.
    - Add an *Origin host name* to represent the backend hostname. For example, `contoso.msappproxy.net`.
    - Optional: Enable caching for the routing rule so Front Door caches your static content.
2. Verify the deployment is complete and the Front Door Service is ready.
3. Assign your Front Door service a user-friendly domain hostname URL. Create a CNAME record for your application proxy External URL that points to Front Door’s domain hostname. The Front Door's domain hostname generates the Front Door service. For example, `contoso.org` points to `contoso.azurefd.net`. For